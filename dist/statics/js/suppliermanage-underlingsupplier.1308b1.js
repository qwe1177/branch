webpackJsonp([8],{1588:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(40),r=(a.n(n),a(0)),o=a.n(r),i=a(12),l=(a.n(i),a(2)),c=a(5),s=a(37),u=a.n(s),p=a(38),m=(a.n(p),a(1589)),d=a(39),f=a(1590),h=[u.a],y=Object(l.createStore)(m.a,l.applyMiddleware.apply(void 0,h));Object(i.render)(o.a.createElement(c.Provider,{store:y},o.a.createElement(d.a,null,o.a.createElement(f.a,null))),document.getElementById("root"))},1589:function(e,t,a){"use strict";var n=a(2),r=a(26),o=(a.n(r),a(1)),i=(a.n(o),a(343)),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c={compNameOrAddressOrMobile:"companyName",compNameOrAddressOrMobileValue:"",level:"",source:"",enterpriseType:"",varietyNameId:"",varietyNameNames:"",mainBrand:"",mainBrandNames:"",areaType:"",partnership:"",createdate:[],other:[]},s={queryform:c},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case i.g:return t.data;case i.f:return{queryform:c};case i.b:return s;default:return e}},p={isFetching:!1,tableData:[],selectedList:[],pagination:{showQuickJumper:!0,showSizeChanger:!0,total:1,current:1,pageSize:10,showTotal:function(e){return"共 "+e+" 条"}}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments[1];switch(t.type){case i.e:return l({},e,{isFetching:!0});case i.c:var a=t.data,n=a.tableData,r=a.pagination,o=l({},e.pagination,r);return l({},e,{tableData:n,pagination:o,isFetching:!1});case i.d:return l({},e,{isFetching:!1});case i.a:var c=t.data.selectedList;return l({},e,{selectedList:c});default:return e}},d=Object(n.combineReducers)({mainQueryData:u,mainTableData:m});t.a=d},1590:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=a(13),l=(a.n(i),a(14)),c=a.n(l),s=a(0),u=a.n(s),p=a(1591),m=(a.n(p),a(20)),d=(a.n(m),a(30)),f=(a.n(d),a(1592)),h=a(1594),y=function(e){function t(){return n(this,t),r(this,e.apply(this,arguments))}return o(t,e),t.prototype.render=function(){var e=c.a.create()(f.a);return u.a.createElement("div",null,u.a.createElement("h3",{className:"page-title"},"下属的供应商"),u.a.createElement("div",{className:"page-main"},u.a.createElement("div",{className:"query-wrap"},u.a.createElement(e,null)),u.a.createElement("div",{className:"tabel-wrap"},u.a.createElement(h.a,null))))},t}(s.Component);t.a=y},1591:function(e,t){},1592:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,l,c=a(19),s=(a.n(c),a(18)),u=a.n(s),p=a(21),m=(a.n(p),a(22)),d=a.n(m),f=a(27),h=(a.n(f),a(33)),y=a.n(h),b=a(24),g=(a.n(b),a(25)),v=a.n(g),E=a(71),C=(a.n(E),a(72)),S=a.n(C),O=a(46),T=(a.n(O),a(47)),w=a.n(T),k=a(28),N=(a.n(k),a(29)),j=a.n(N),I=a(13),D=(a.n(I),a(14)),V=a.n(D),F=a(0),x=a.n(F),q=a(3),P=(a.n(q),a(1)),R=a.n(P),M=a(1593),_=(a.n(M),a(111)),Q=a(151),B=a(73),L=a(5),A=a(2),H=a(343),U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Y=V.a.Item,z=j.a.Option,W=(w.a.MonthPicker,w.a.RangePicker),K=S.a.Group,G=(i=Object(L.connect)(function(e){return{mainQueryData:e.mainQueryData,mainTableData:e.mainTableData}},function(e){return Object(A.bindActionCreators)({initQueryFrom:H.i,setQueryFrom:H.m,resetQueryFrom:H.l,requestSupplier:H.k,queryTableData:H.j},e)}))(l=function(e){function t(){var a,o,i;n(this,t);for(var l=arguments.length,c=Array(l),s=0;s<l;s++)c[s]=arguments[s];return a=o=r(this,e.call.apply(e,[this].concat(c))),o.state={brandSelectorVisible:!1,categorySelectorVisible:!1},o.handleSubmit=function(e){e.preventDefault();var t=(o.props.mainQueryData.queryform,o.props.mainTableData),a=t.pagination,n=t.isFetching;o.props.form.validateFieldsAndScroll(function(e,t){if(!e&&!n){var r=U({current:1},a);o.props.setQueryFrom({queryform:t}),o.props.queryTableData({queryform:t,pagination:r})}})},o.handleReset=function(){o.props.form.resetFields();var e=o.props.mainQueryData;e.queryform,e.pagination;o.props.resetQueryFrom()},o.checkName=function(e,t,a){var n=o.props.form,r=n.getFieldValue("name");r&&""!=r?a():a("企业名称必须填写!")},o.changeToLastSeven=function(){o.props.form.setFieldsValue({createdate:[R()().subtract(6,"days"),R()()]})},o.changeToToday=function(){o.props.form.setFieldsValue({createdate:[R()(),R()()]})},o.handleOpenChoose=function(){o.setState({brandSelectorVisible:!0})},o.handleOpenChooseForCategory=function(){o.setState({categorySelectorVisible:!0})},o.handleChoosed=function(e,t){o.props.form.setFieldsValue({mainBrandNames:t,mainBrandId:e}),o.setState({brandSelectorVisible:!1})},o.handleCancel=function(){o.setState({brandSelectorVisible:!1})},o.handleChoosedForCategory=function(e,t){o.props.form.setFieldsValue({varietyNameNames:t,varietyNameId:e}),o.setState({categorySelectorVisible:!1})},o.handleCancelForCategory=function(){o.setState({categorySelectorVisible:!1})},o.getLastSelectBrand=function(){return{labelstr:o.props.form.getFieldValue("mainBrandNames"),idstr:o.props.form.getFieldValue("mainBrandId")}},o.getLastSelectCategory=function(){return o.props.form.getFieldValue("varietyNameId")},i=a,r(o,i)}return o(t,e),t.prototype.componentDidMount=function(){var e=this.props.mainQueryData.queryform,t={};for(var a in e)e[a]&&""!=e[a]&&(t[a]=e[a]);this.props.form.setFieldsValue(t)},t.prototype.render=function(){var e=this.props.form.getFieldDecorator,t={labelCol:{span:9},wrapperCol:{span:15}},a={labelCol:{span:7},wrapperCol:{span:17}},n={labelCol:{span:4},wrapperCol:{span:20}},r=this.getLastSelectBrand(),o=this.getLastSelectCategory();return x.a.createElement(V.a,{layout:"horizontal",onSubmit:this.handleSubmit,className:"query-form"},x.a.createElement(d.a,{gutter:16},x.a.createElement(v.a,{span:3},x.a.createElement(Y,null,e("compNameOrAddressOrMobile",{initialValue:"companyName"})(x.a.createElement(j.a,{style:{width:"100%"}},Object(B.a)("企业名称").map(function(e){return x.a.createElement(z,{key:e.value,value:e.value},e.label)}))))),x.a.createElement(v.a,{span:2},x.a.createElement(Y,null,e("compNameOrAddressOrMobileValue")(x.a.createElement(y.a,{style:{width:"100%"}})))),x.a.createElement(v.a,{span:4},x.a.createElement(Y,U({},t,{label:"客户级别"}),e("level",{initialValue:""})(x.a.createElement(j.a,{style:{width:"100%"}},Object(B.a)("客户级别").map(function(e){return x.a.createElement(z,{key:e.value,value:e.value},e.label)}))))),x.a.createElement(v.a,{span:4},x.a.createElement(Y,U({},t,{label:"客户来源"}),e("source",{initialValue:""})(x.a.createElement(j.a,{style:{width:"100%"}},Object(B.a)("客户来源").map(function(e){return x.a.createElement(z,{key:e.value,value:e.value},e.label)}))))),x.a.createElement(v.a,{span:5},x.a.createElement(Y,U({},t,{label:"客户类型"}),e("enterpriseType",{initialValue:""})(x.a.createElement(j.a,{style:{width:"100%"}},Object(B.a)("客户类型").map(function(e){return x.a.createElement(z,{key:e.value,value:e.value},e.label)}))))),x.a.createElement(v.a,{span:6},e("varietyNameId")(x.a.createElement(y.a,{type:"hidden"})),x.a.createElement(Y,U({},t,{label:"主营类目"}),e("varietyNameNames")(x.a.createElement(y.a,{onClick:this.handleOpenChooseForCategory,readOnly:!0}))))),x.a.createElement(d.a,{gutter:16},x.a.createElement(v.a,{span:5},e("mainBrandId")(x.a.createElement(y.a,{type:"hidden"})),x.a.createElement(Y,U({},t,{label:"主营品牌"}),e("mainBrandNames")(x.a.createElement(y.a,{onClick:this.handleOpenChoose,readOnly:!0})))),x.a.createElement(v.a,{span:5},x.a.createElement(Y,U({},t,{label:"客户区域"}),e("areaType",{initialValue:""})(x.a.createElement(j.a,{style:{width:120}},Object(B.a)("客户区域").map(function(e){return x.a.createElement(z,{key:e.value,value:e.value},e.label)}))))),x.a.createElement(v.a,{span:5},x.a.createElement(Y,U({},t,{label:"合作关系"}),e("partnership",{initialValue:""})(x.a.createElement(j.a,{style:{width:120}},Object(B.a)("合作关系").map(function(e){return x.a.createElement(z,{key:e.value,value:e.value},e.label)}))))),x.a.createElement(v.a,{span:7},x.a.createElement(Y,U({},a,{label:"创建日期"}),e("createdate")(x.a.createElement(W,null)))),x.a.createElement(v.a,{span:2,className:"right-wrap"},x.a.createElement("span",{className:"rangeButton",onClick:this.changeToToday},"今天")," ",x.a.createElement("span",{className:"rangeButton",onClick:this.changeToLastSeven},"近7天"))),x.a.createElement(d.a,{gutter:16},x.a.createElement(v.a,{span:16,style:{textAlign:"left"}},x.a.createElement(Y,U({},n,{label:"其他条件"}),e("other")(x.a.createElement(K,{options:Object(B.a)("供应商列表其他查询条件")})))),x.a.createElement(v.a,{span:8,className:"right-wrap"},x.a.createElement(u.a,{type:"primary",htmlType:"submit"},"查询"),x.a.createElement(u.a,{type:"ghost",className:"resetButton",onClick:this.handleReset},"重置"))),x.a.createElement(_.default,{onChoosed:this.handleChoosed.bind(this),visible:this.state.brandSelectorVisible,choosedKeys:r,onCancel:this.handleCancel.bind(this)}),x.a.createElement(Q.default,{onChoosed:this.handleChoosedForCategory.bind(this),choosedKeys:o,visible:this.state.categorySelectorVisible,onCancel:this.handleCancelForCategory.bind(this)}))},t}(x.a.Component))||l;t.a=G},1593:function(e,t){},1594:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,l,c=a(31),s=(a.n(c),a(32)),u=a.n(s),p=a(34),m=(a.n(p),a(35)),d=a.n(m),f=a(43),h=(a.n(f),a(44)),y=a.n(h),b=a(0),g=a.n(b),v=a(3),E=(a.n(v),a(1595)),C=(a.n(E),a(5)),S=a(2),O=a(343),T=(a(10),a(15)),w=a(20),k=(a.n(w),a(74)),N=a(68),j=(i=Object(C.connect)(function(e){return{mainQueryData:e.mainQueryData,mainTableData:e.mainTableData}},function(e){return Object(S.bindActionCreators)({queryTableData:O.j,setQueryFrom:O.m,doChangeMainCheck:O.h},e)}))(l=function(e){function t(){var a,o,i;n(this,t);for(var l=arguments.length,c=Array(l),s=0;s<l;s++)c[s]=arguments[s];return a=o=r(this,e.call.apply(e,[this].concat(c))),o.state={personSelectorVisible:!1,actionInfo:{},confirmTarget:{action:"moveToHighSeas",data:[]},confirmContent:"是否将此供应商移入到公海?"},o.queryWithDefault=function(){var e=o.props.mainQueryData.queryform,t=o.props.mainTableData.pagination;o.props.queryTableData({queryform:e,pagination:t})},o.handleTableChange=function(e,t,a){var n=o.props.mainQueryData.queryform;o.props.queryTableData({queryform:n,pagination:e})},o.rowSelection={onChange:function(e,t){o.props.doChangeMainCheck({selectedList:t})},getCheckboxProps:function(e){return{disabled:"Disabled User"===e.name}}},o.handleRefresh=function(){o.props.mainTableData.isFetching||o.queryWithDefault()},o.handleOpenChoose=function(){var e=o.props.mainTableData.selectedList;0==e.length?y.a.warning("请选择要分配的供应商"):o.setState({personSelectorVisible:!0,actionInfo:{name:"分配",data:e}})},o.handlePersonCancel=function(){o.setState({personSelectorVisible:!1})},o.handleRowClick=function(e,t,a){var n=a.target.getAttribute("class");if(-1!=n.indexOf("js-addus")||-1!=n.indexOf("js-out")||-1!=n.indexOf("js-in"))if(-1!=n.indexOf("js-addus")){var r=Object(T.a)();o.handleChoosed(r.userId,r.realName,{name:"加入",data:[e]})}else-1!=n.indexOf("js-out")?o.setState({personSelectorVisible:!0,actionInfo:{name:"分配",data:[e]}}):o.openConfirmModal({confirmTarget:{action:"moveToHighSeas",data:e.supplierId}})},o.mutiFetchToHighSea=function(){var e=o.props.mainTableData.selectedList,t=e.map(function(e){return e.supplierId}).toString();o.doFetchToHighSea(t)},o.doFetchToHighSea=function(e,t){Object(k.fetchToHighSea)(e).then(function(e){"1"==e.data.code?(y.a.success("移入成功!"),o.queryWithDefault()):y.a.error("移入失败!")}).catch(function(e){y.a.error("移入失败!")})},o.handleChoosed=function(e,t,a){o.setState({personSelectorVisible:!1});var n=a.name,r=a.data.map(function(e){return e.supplierId}).toString(),i=a.data.map(function(e){return e.userId}).toString();Object(k.fetchSetContacts)(r,e,t,i).then(function(e){"1"==e.data.code?(y.a.success(n+"成功!"),o.queryWithDefault()):y.a.error(n+"失败!")}).catch(function(e){y.a.error(n+"失败!")})},o.handleConfirmOk=function(){o.setState({confirmVisible:!1});var e=o.state.confirmTarget.action;if("moveToHighSeas"==e){var t=o.state.confirmTarget.data;o.doFetchToHighSea(t)}else"mutiMoveToHighSeas"==e&&o.mutiFetchToHighSea()},o.handleConfirmCancel=function(){o.setState({confirmVisible:!1})},o.openConfirmModal=function(e){var t={confirmVisible:!0};if(e){var a=e.confirmContent,n=e.confirmTarget;a&&(t.confirmContent=a),n&&(t.confirmTarget=n)}o.setState(t)},o.getDetailUrl=function(e,t,a){var n=Object(T.e)(),r=n.moduleId?n.moduleId:"",o=n.systemId?n.systemId:"",i="";return"my"==e?i="/suppliermanage/mysupplierdetail/":"theHighSeas"==e?i="/suppliermanage/inseasupplierdetail/":"underling"==e&&(i="/suppliermanage/underlingsupplierdetail/"),""==i?a:g.a.createElement("a",{href:i+"?systemId="+o+"&moduleId="+r+"&supplierId="+t},a)},o.handleClickMoveToSea=function(){if(0===o.props.mainTableData.selectedList.length)return void y.a.warning("请选择要移入公海的供应商");o.openConfirmModal({confirmTarget:{action:"mutiMoveToHighSeas"},confirmContent:"是否将选中的供应商移入到公海?"})},i=a,r(o,i)}return o(t,e),t.prototype.componentWillMount=function(){this.queryWithDefault()},t.prototype.render=function(){var e=this,t=[{title:"企业名称",dataIndex:"companyName",key:"companyName",render:function(t,a){return e.getDetailUrl(a.type,a.supplierId,t)}},{title:"来源",dataIndex:"source",key:"source"},{title:"企业性质",dataIndex:"enterpriseType",key:"enterpriseType"},{title:"主营类目",dataIndex:"varietyName",key:"varietyName"},{title:"主营品牌",dataIndex:"mainBrand",key:"mainBrand"},{title:"联系人信息",dataIndex:"contacts",key:"contacts",render:function(e,t){return g.a.createElement("div",null,g.a.createElement("div",null,t.fullname),g.a.createElement("div",null,t.mobile))}},{title:"创建时间",dataIndex:"createTime2",key:"createTime2"},{title:"负责人",dataIndex:"realName",key:"realName"},{title:"操作",dataIndex:"option",render:function(e,t){return g.a.createElement("span",{className:"table-options-wrap"},g.a.createElement("a",{href:"javascript:;",className:"js-out"},"分配"),g.a.createElement("a",{href:"javascript:;",className:"last-link js-in"},"移入"))},key:"option"}],a=this.props.mainTableData,n=a.tableData,r=a.pagination,o=a.isFetching;return g.a.createElement("div",{className:"main-table"},g.a.createElement("div",{className:"tabel-extend-option"},g.a.createElement("span",{onClick:this.handleRefresh,className:"refresh"},"刷新列表"),g.a.createElement("span",{onClick:this.handleClickMoveToSea},"移入公海"),g.a.createElement("span",{onClick:this.handleOpenChoose},"分配负责人")),g.a.createElement(d.a,{bordered:!0,columns:t,rowKey:function(e){return e.supplierId},dataSource:n,pagination:r,loading:o,onChange:this.handleTableChange,rowSelection:this.rowSelection,onRowClick:this.handleRowClick}),g.a.createElement(u.a,{visible:this.state.confirmVisible,onOk:this.handleConfirmOk,onCancel:this.handleConfirmCancel},g.a.createElement("p",null,this.state.confirmContent)),g.a.createElement(N.default,{onChoosed:this.handleChoosed.bind(this),onCancel:this.handlePersonCancel.bind(this),visible:this.state.personSelectorVisible,actionInfo:this.state.actionInfo}))},t}(g.a.Component))||l;t.a=j},1595:function(e,t){},343:function(e,t,a){"use strict";function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){function n(r,o){try{var i=t[r](o),l=i.value}catch(e){return void a(e)}if(!i.done)return Promise.resolve(l).then(function(e){n("next",e)},function(e){n("throw",e)});e(l)}return n("next")})}}a.d(t,"b",function(){return m}),a.d(t,"f",function(){return d}),a.d(t,"g",function(){return f}),a.d(t,"e",function(){return h}),a.d(t,"c",function(){return y}),a.d(t,"d",function(){return b}),a.d(t,"a",function(){return g}),a.d(t,"k",function(){return S}),a.d(t,"i",function(){return k}),a.d(t,"l",function(){return N}),a.d(t,"m",function(){return j}),a.d(t,"j",function(){return I}),a.d(t,"h",function(){return D});var r=a(10),o=a(15),i=a(20),l=a.n(i),c=a(26),s=a.n(c),u=this,p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},m="INIT_QUERY",d="RESET_QUERY",f="SET_QUERY",h="REQUEST_SUPPLIER",y="RECEIVE_SUPPLIER",b="RECEIVE_SUPPLIER_FAIL",g="CHANGE_MAIN_CHECK",v=function(e){return{type:m,data:e}},E=function(e){return{type:f,data:e}},C=function(e){return{type:d,data:e}},S=function(){return{type:h}},O=function(e){return{type:y,data:e}},T=function(){return{type:b}},w=function(e){return{type:g,data:e}},k=function(e){return function(t,a){return t(v(e))}},N=function(e){return function(t,a){return t(C(e))}},j=function(e){return function(t,a){return t(E(e))}},I=function(e){return function(){var t=n(regeneratorRuntime.mark(function t(a,n){var i,c,m,d,f,h,y,b,g,v,E,C,w,k;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a(S());case 3:if(i=Object(o.b)().token,c=Object(o.e)(),m=c.moduleId?c.moduleId:"",d=e.queryform,f=e.pagination,h={pageNo:f.current,pageSize:f.pageSize},d.createdate&&d.createdate.length>0&&(d.startTime=d.createdate[0].format("YYYY-MM-DD"),d.endTime=d.createdate[1].format("YYYY-MM-DD")),!(d.other&&d.other.length>0)){t.next=27;break}y=d.other,b=y,g=Array.isArray(b),v=0,b=g?b:b[Symbol.iterator]();case 13:if(!g){t.next=19;break}if(!(v>=b.length)){t.next=16;break}return t.abrupt("break",27);case 16:E=b[v++],t.next=23;break;case 19:if(v=b.next(),!v.done){t.next=22;break}return t.abrupt("break",27);case 22:E=v.value;case 23:C=E,d[C]="yes";case 25:t.next=13;break;case 27:return d=s.a.omit(d,["varietyNameNames","mainBrandNames","createdate","other"]),d=s.a.omitBy(d,s.a.isUndefined),w=p({isPass:"yes",markToDistinguish:"underling"},d,h,{token:i,moduleId:m}),t.next=32,l.a.get(r.c+"/management/viewSupplierList.do",{params:w,timeout:1e4});case 32:return k=t.sent,t.next=35,a(O({tableData:k.data.data.data,pagination:{total:k.data.data.rowCount,current:k.data.data.pageNo,pageSize:k.data.data.pageSize}}));case 35:return t.abrupt("return",t.sent);case 38:return t.prev=38,t.t0=t.catch(0),t.next=43,a(T());case 43:return t.abrupt("return",t.sent);case 44:case"end":return t.stop()}},t,u,[[0,38]])}));return function(e,a){return t.apply(this,arguments)}}()},D=function(e){return function(t,a){return t(w(e))}}}},[1588]);