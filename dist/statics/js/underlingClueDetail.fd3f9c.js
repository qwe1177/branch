webpackJsonp([33],{1605:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=t(40),r=(t.n(n),t(0)),i=t.n(r),l=t(12),s=(t.n(l),t(2)),o=t(5),p=t(37),c=t.n(p),d=t(38),u=(t.n(d),t(1606)),m=t(39),h=t(1607),f=[c.a],b=Object(s.createStore)(u.a,s.applyMiddleware.apply(void 0,f));Object(l.render)(i.a.createElement(o.Provider,{store:b},i.a.createElement(m.a,null,i.a.createElement(h.a,null))),document.getElementById("root"))},1606:function(e,a,t){"use strict";var n=t(2),r=t(70),i=t(60),l=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},s=Object(n.combineReducers)(l({},r.a,{EditModal:i.a}));a.a=s},1607:function(e,a,t){"use strict";function n(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function r(e,a){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?e:a}function i(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(e,a):e.__proto__=a)}var l,s,o=t(21),p=(t.n(o),t(22)),c=t.n(p),d=t(24),u=(t.n(d),t(25)),m=t.n(u),h=t(31),f=(t.n(h),t(32)),b=t.n(f),E=t(56),y=(t.n(E),t(57)),M=t.n(y),D=t(59),g=(t.n(D),t(43)),v=t.n(g),C=t(13),S=(t.n(C),t(14)),w=t.n(S),N=t(19),I=(t.n(N),t(18)),O=t.n(I),k=t(41),j=(t.n(k),t(42)),R=t.n(j),Q=t(0),Y=t.n(Q),X=t(1608),A=(t.n(X),t(23)),B=t(10),V=t(30),x=(t.n(V),t(15)),H=t(148),P=t(68),J=t(130),q=t(223),T=t(226),G=t(227),K=(t(118),t(97)),L=t(183),U=t(74),F=t(5),_=t(2),W=t(85),z=t(60),Z=t(76),$=(l=Object(F.connect)(function(e){return{supplierDetailMain:e.supplierDetailMain,EditModal:e.EditModal,followupShower:e.followupShower,editXSJBVisible:e.editXSJBVisible}},function(e){return Object(_.bindActionCreators)({fetchMainData:W.k,fetchMainData2:W.l,doChangeChargeMen:W.j,doFormAdd:z.d,doQueryFollow:Z.e,toOpenUpdateXSJB:W.r,toCloseUpdateXSJB:W.p,QXPK:W.g,QRTJ:W.d,QXADDMY:W.f,QRADDMY:W.b,PKreset:W.a,QRADDMYHANDLE:W.c,QRYRGH:W.e,QXYRGH:W.h},e)}))(s=function(e){function a(t,i){n(this,a);var l=r(this,e.call(this,t,i));return l.handleOpenChoose=function(){l.setState({personSelectorVisible:!0})},l.handleChoosed=function(e,a,t){l.setState({personSelectorVisible:!1});var n=l.supplierId,r=l.props.supplierDetailMain.data.supplier.userId;Object(U.fetchSetContacts)(n,e,a,r).then(function(e){"1"==e.data.code?(R.a.success("分配负责人操作成功!"),l.props.doChangeChargeMen()):R.a.error("分配负责人操作失败!")}).catch(function(e){R.a.error("分配负责人操作失败!")})},l.pkmodal=function(){l.props.QRTJ()},l.qxpkhandle=function(){l.props.QXPK()},l.qrtjhandle=function(){var e=l.props.supplierDetailMain.data.supplierId,a=l.props.supplierDetailMain.data.supplier.userId;A.a.get(B.c+"/clue/editCancelQualityControl.do",{params:{supplierId:e,responsibleSources:a,responsibleUserId:Object(x.a)().userId,responsiblRealName:Object(x.a)().realName}}).then(function(e){200==e.status&&1==e.data.code?(R.a.success(""+e.data.msg),l.props.QXPK(),l.props.PKreset()):R.a.error(""+e.data.msg)}).catch(function(e){})},l.ADDMYmodal=function(){l.props.QRADDMY()},l.qxADDMYhandle=function(){l.props.QXADDMY()},l.QRYRGHhandle=function(){var e=l.supplierId;Object(U.fetchToHighSea)(e).then(function(e){"1"==e.data.code?(R.a.success("移入公海成功!"),l.props.QXYRGH(),window.opener&&window.opener.location.reload(),setTimeout(function(){location.href=document.referrer},1e3)):R.a.error("移入公海失败!")}).catch(function(e){R.a.error("移入公海失败!")})},l.QXYRGHhandle=function(){l.props.QXYRGH()},l.qrADDMYhandle=function(){A.a.get(B.c+"/clue/editPersonLiable.do",{params:{supplierId:l.props.supplierDetailMain.data.supplierId,responsibleSources:l.props.supplierDetailMain.data.supplier.userId,responsibleUserId:Object(x.a)().userId,responsiblRealName:Object(x.a)().realName}}).then(function(e){200==e.status&&1==e.data.code?(R.a.success(""+e.data.msg),l.props.QRADDMYHANDLE(),window.opener&&window.opener.location.reload(),setTimeout(function(){location.href=document.referrer},1e3)):R.a.error(""+e.data.msg)}).catch(function(e){})},l.XSJBhandleCancel=function(){l.props.toCloseUpdateXSJB()},l.XSJBhandleOpenModal=function(){l.props.toOpenUpdateXSJB()},l.handleFetchToHighSea=function(){l.props.QRYRGH()},l.showMoreBtn=function(){l.setState({isBtnExpand:!0})},l.turnToMidify=function(){var e=l.supplierId,a=Object(x.e)(),t=a.moduleId?a.moduleId:"";location.href="/suppliermanage/modifysupplier/?supplierId="+e+"&moduleId="+t+"&moduleUrl="},l.tourl=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(){var t=l.supplierId,n=Object(x.e)(),r=n.systemId?n.systemId:"",i=n.moduleId?n.moduleId:"";location.href=a?e+"?supplierId="+t+"&moduleId="+i+"&systemId="+r:e+"?moduleId="+i+"&systemId="+r}},l.handleMerged=function(e){l.setState({mergeSuppliersVisible:!1}),e?R.a.success("合并成功!"):R.a.error("合并失败!")},l.handlePersonCancel=function(){l.setState({personSelectorVisible:!1})},l.openMergedWidget=function(){l.setState({mergeSuppliersVisible:!0})},l.handleCancel=function(){l.setState({mergeSuppliersVisible:!1})},l.addShowModal=function(e,a,t){l.props.doFormAdd({supplierId:e,companyName:a,followupType:t,modalType:"1"})},l.handleAddSuccess=function(){var e=l.props.followupShower,a=e.query,t=e.pagination;l.props.doQueryFollow({query:a,pagination:t})},l.state={isBtnExpand:!1,personSelectorVisible:!1,mergeSuppliersVisible:!1},l.supplierId=Object(x.c)("supplierId"),l}return i(a,e),a.prototype.componentWillMount=function(){this.props.fetchMainData2(this.supplierId)},a.prototype.render=function(){var e=this,a=this.supplierId,t=this.state.isBtnExpand,n=this.props.supplierDetailMain.isExpand,r=n?"page-main clearfix right-extend-limit":"page-main clearfix",i=t?"botton-wrap all-btns":"botton-wrap default-btns",l=this.props.supplierDetailMain.data.companyName?this.props.supplierDetailMain.data.companyName:"",s=!1,o=!1,p=!1;switch(this.props.supplierDetailMain.data.self){case"my":s=!0;break;case"underling":s=!0,o=!0;break;case"other":!0;break;case"theHighSeas":p=!0}var d="";switch(this.props.supplierDetailMain.data.qualityControlId){case"0":case"4":d=Y.a.createElement(O.a,{type:"primary",className:"normal",onClick:this.tourl("/qualitycontrol/retosubmit/")},"提交品控");break;case"1":d=Y.a.createElement(O.a,{type:"primary",className:"normal",onClick:this.pkmodal},"取消品控");break;case"3":d=Y.a.createElement(O.a,{type:"primary",className:"normal",onClick:this.tourl("/qualitycontrol/tosubmit/")},"重新提交品控")}var u=w.a.create()(L.a),h=["品控驳回","品控审查中"],f=this.props.supplierDetailMain.data.clueLevel,E=s&&!h.some(function(e){return e==f}),y=E?Y.a.createElement(v.a,{type:"edit",onClick:this.XSJBhandleOpenModal}):"";return Y.a.createElement("div",null,Y.a.createElement("h3",{className:"page-title"},"下属线索详情"),Y.a.createElement("div",{className:r},Y.a.createElement("div",{className:"left-wrap"},Y.a.createElement("div",{className:"top-wrap"},Y.a.createElement("div",{className:"base-wrap"},Y.a.createElement("div",{className:"base-info"},Y.a.createElement(M.a,{spinning:this.props.supplierDetailMain.isfetching},Y.a.createElement(G.a,null)),Y.a.createElement("div",{className:"person-wrap"},Y.a.createElement(T.a,{self:this.props.supplierDetailMain.data.self}))),Y.a.createElement("div",{className:i},Y.a.createElement("div",{className:"btns"},s?Y.a.createElement(O.a,{type:"primary",className:"normal",onClick:function(a,t,n){return e.addShowModal(e.supplierId,l,1)}},"新增跟进线索"):"",s?d:"",s?Y.a.createElement(O.a,{type:"primary",className:"normal",onClick:this.handleOpenChoose},"分配负责人"):"",p?Y.a.createElement(O.a,{type:"primary",className:"normal",onClick:this.ADDMYmodal},"加入我的线索"):"",o?Y.a.createElement(O.a,{type:"primary",className:"normal",onClick:this.openMergedWidget},"并入线索"):"",s?Y.a.createElement(O.a,{type:"primary",className:"normal",onClick:this.handleFetchToHighSea},"移入公海"):"",s?Y.a.createElement(O.a,{type:"primary",className:"normal",onClick:this.tourl("/productpricing/upload/")},"上传产品报价"):"",Y.a.createElement(b.a,{title:"提示",visible:this.props.supplierDetailMain.PKVisible,onCancel:this.qxpkhandle,onOk:this.qrtjhandle},Y.a.createElement("p",null,this.props.supplierDetailMain.PKcontent)),Y.a.createElement(b.a,{title:"提示",visible:this.props.supplierDetailMain.addmyVisible,onCancel:this.qxADDMYhandle,onOk:this.qrADDMYhandle},Y.a.createElement("p",null,this.props.supplierDetailMain.ADDMYcontent)),Y.a.createElement(b.a,{title:"提示",visible:this.props.supplierDetailMain.yrghVisible,onCancel:this.QXYRGHhandle,onOk:this.QRYRGHhandle},Y.a.createElement("p",null,this.props.supplierDetailMain.yrghcontent))),Y.a.createElement(O.a,{className:"more",onClick:function(){return e.showMoreBtn()}},"更多"),Y.a.createElement(P.default,{onChoosed:this.handleChoosed.bind(this),visible:this.state.personSelectorVisible,onCancel:this.handlePersonCancel.bind(this)}),Y.a.createElement(H.default,{onComfirm:this.handleMerged.bind(this),onCancel:this.handleCancel.bind(this),supplierId:a,companyName:l,visible:this.state.mergeSuppliersVisible}),Y.a.createElement(K.default,{onSuccess:this.handleAddSuccess.bind(this)}))),Y.a.createElement("div",{className:"chart-wrap"},Y.a.createElement("div",{className:"xsjb"},Y.a.createElement("p",{className:"p1"},"线索级别"),Y.a.createElement("p",{className:"p2"},Y.a.createElement("span",{className:"s1"},this.props.supplierDetailMain.data.clueLevel?this.props.supplierDetailMain.data.clueLevel:"暂无"),Y.a.createElement("span",{className:"s2"},y)),Y.a.createElement(b.a,{title:"修改线索级别",visible:this.props.supplierDetailMain.editXSJBVisible,onCancel:this.XSJBhandleCancel,footer:null},Y.a.createElement(u,null))))),Y.a.createElement("div",{className:"bottom-wrap"},Y.a.createElement("div",{className:"tab"},Y.a.createElement("span",{className:"active"},"跟进记录")),Y.a.createElement(q.a,null))),Y.a.createElement("div",{className:"right-wrap"},Y.a.createElement("div",{className:"link-wrap"},Y.a.createElement(c.a,null,Y.a.createElement(m.a,{span:12,style:{paddingRight:"5px"}},Y.a.createElement(O.a,{type:"primary",className:"normal",onClick:this.tourl("/newClue/",0)},"新建线索")),Y.a.createElement(m.a,{span:12,style:{paddingLeft:"5px"}},Y.a.createElement(O.a,{type:"primary",className:"normal",onClick:this.tourl("/editClue/")},"编辑线索")))),Y.a.createElement(M.a,{spinning:this.props.supplierDetailMain.isfetching},Y.a.createElement(J.default,null)))))},a}(Q.Component))||s;a.a=$},1608:function(e,a){}},[1605]);