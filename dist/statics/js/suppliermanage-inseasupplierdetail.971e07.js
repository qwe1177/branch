webpackJsonp([36],{1566:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(40),r=(a.n(n),a(0)),o=a.n(r),i=a(12),l=(a.n(i),a(2)),s=a(5),c=a(37),p=a.n(c),d=a(38),u=(a.n(d),a(1567)),m=a(39),h=a(1568),f=[p.a],b=Object(l.createStore)(u.a,l.applyMiddleware.apply(void 0,f));Object(i.render)(o.a.createElement(s.Provider,{store:b},o.a.createElement(m.a,null,o.a.createElement(h.a,null))),document.getElementById("root"))},1567:function(e,t,a){"use strict";var n=a(2),r=a(70),o=a(60),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=Object(n.combineReducers)(i({},r.a,{EditModal:o.a}));t.a=l},1568:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,l,s=a(19),c=(a.n(s),a(18)),p=a.n(c),d=a(56),u=(a.n(d),a(57)),m=a.n(u),h=a(43),f=(a.n(h),a(44)),b=a.n(f),w=a(0),y=a.n(w),E=a(1569),v=(a.n(E),a(20)),g=(a.n(v),a(30)),S=(a.n(g),a(15)),C=a(148),M=a(68),N=a(130),O=a(228),I=a(229),j=a(230),T=(a(118),a(97)),V=a(74),k=a(5),D=a(2),x=a(85),A=a(60),P=a(76),B=(i=Object(k.connect)(function(e){return{supplierDetailMain:e.supplierDetailMain,EditModal:e.EditModal,followupShower:e.followupShower}},function(e){return Object(D.bindActionCreators)({fetchMainData:x.k,doChangeChargeMen:x.j,doFormAdd:A.d,doQueryFollow:P.e},e)}))(l=function(e){function t(a,o){n(this,t);var i=r(this,e.call(this,a,o));return i.handleOpenChoose=function(){i.setState({personSelectorVisible:!0})},i.handleChoosed=function(e,t,a){i.setState({personSelectorVisible:!1});var n=i.supplierId,r=i.props.supplierDetailMain.data.supplier.userId;Object(V.fetchSetContacts)(n,e,t,r).then(function(e){"1"==e.data.code?(b.a.success("分配负责人操作成功!"),window.opener&&window.opener.location.reload(),setTimeout(function(){location.href=document.referrer},1e3)):b.a.error("分配负责人操作失败!")}).catch(function(e){b.a.error("分配负责人操作失败!")})},i.handleFetchToHighSea=function(){var e=i.supplierId;Object(V.fetchToHighSea)(e).then(function(e){"1"==e.data.code?(b.a.success("移入公海成功!"),window.opener&&window.opener.location.reload(),setTimeout(function(){location.href=document.referrer},1e3)):b.a.error("移入公海失败!")}).catch(function(e){b.a.error("移入公海失败!")})},i.handleAddToMe=function(){var e=Object(S.a)();Object(V.fetchSetContacts)(i.supplierId,e.userId,e.realName,"0").then(function(e){"1"==e.data.code?(b.a.success("加入我的客户成功!"),window.opener&&window.opener.location.reload(),setTimeout(function(){location.href=document.referrer},1e3)):b.a.error("加入我的客户失败!")}).catch(function(e){b.a.error("加入我的客户失败!")})},i.showMoreBtn=function(){i.setState({isBtnExpand:!0})},i.turnToMidify=function(){var e=i.supplierId,t=Object(S.e)(),a=t.moduleId?t.moduleId:"",n=t.systemId?t.systemId:"";location.href="/suppliermanage/modifysupplier/?supplierId="+e+"&moduleId="+a+"&systemId="+n},i.handleMerged=function(e){i.setState({mergeSuppliersVisible:!1}),e?b.a.success("合并成功!"):b.a.error("合并失败!")},i.handlePersonCancel=function(){i.setState({personSelectorVisible:!1})},i.openMergedWidget=function(){i.setState({mergeSuppliersVisible:!0})},i.handleCancel=function(){i.setState({mergeSuppliersVisible:!1})},i.addShowModal=function(e,t){i.props.doFormAdd({companyName:t,supplierId:e,followupType:2,modalType:"1"})},i.handleAddSuccess=function(){var e=i.props.followupShower,t=e.query,a=e.pagination;i.props.doQueryFollow({query:t,pagination:a})},i.handleTurnToNewClue=function(){location.href="/newClue/"},i.state={isBtnExpand:!1,personSelectorVisible:!1,mergeSuppliersVisible:!1},i.supplierId=Object(S.c)("supplierId"),i}return o(t,e),t.prototype.componentWillMount=function(){this.props.fetchMainData(this.supplierId)},t.prototype.render=function(){var e=this,t=this.supplierId,a=this.state.isBtnExpand,n=this.props.supplierDetailMain.isExpand,r=n?"page-main clearfix right-extend-limit":"page-main clearfix",o=a?"botton-wrap all-btns":"botton-wrap default-btns",i=this.props.supplierDetailMain.data.companyName?this.props.supplierDetailMain.data.companyName:"";return y.a.createElement("div",null,y.a.createElement("h3",{className:"page-title"},"供应商详情"),y.a.createElement("div",{className:r},y.a.createElement("div",{className:"left-wrap"},y.a.createElement("div",{className:"top-wrap"},y.a.createElement("div",{className:"base-wrap"},y.a.createElement("div",{className:"base-info"},y.a.createElement(m.a,{spinning:this.props.supplierDetailMain.isfetching},y.a.createElement(j.default,null)),y.a.createElement("div",{className:"person-wrap"},y.a.createElement(I.default,null))),y.a.createElement("div",{className:o},y.a.createElement("div",{className:"btns"},y.a.createElement(p.a,{type:"primary",className:"normal",onClick:this.openMergedWidget},"并入供应商"),y.a.createElement(p.a,{type:"primary",className:"normal",onClick:function(){return e.addShowModal(e.supplierId,i)}},"跟进供应商"),y.a.createElement(p.a,{type:"primary",className:"normal",onClick:this.turnToMidify},"编辑供应商"),y.a.createElement(p.a,{type:"primary",className:"normal",onClick:this.handleOpenChoose},"分配负责人"),y.a.createElement(p.a,{type:"primary",className:"normal",onClick:this.handleAddToMe},"加入我的客户")),y.a.createElement(p.a,{className:"more",onClick:function(){return e.showMoreBtn()}},"更多"),y.a.createElement(M.default,{onChoosed:this.handleChoosed.bind(this),visible:this.state.personSelectorVisible,onCancel:this.handlePersonCancel.bind(this)}),y.a.createElement(C.default,{onComfirm:this.handleMerged.bind(this),onCancel:this.handleCancel.bind(this),supplierId:t,companyName:i,visible:this.state.mergeSuppliersVisible}),y.a.createElement(T.default,{onSuccess:this.handleAddSuccess.bind(this)}))),y.a.createElement("div",{className:"chart-wrap"})),y.a.createElement("div",{className:"bottom-wrap"},y.a.createElement("div",{className:"tab"},y.a.createElement("span",{className:"active"},"跟进记录")),y.a.createElement(O.default,null))),y.a.createElement("div",{className:"right-wrap"},y.a.createElement("div",{className:"link-wrap"},y.a.createElement(p.a,{type:"primary",className:"normal",onClick:this.handleTurnToNewClue},"新建供应商线索")),y.a.createElement(m.a,{spinning:this.props.supplierDetailMain.isfetching},y.a.createElement(N.default,{isClueView:!1})))))},t}(w.Component))||l;t.a=B},1569:function(e,t){}},[1566]);