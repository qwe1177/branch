webpackJsonp([35],{1584:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(40),r=(n.n(a),n(0)),i=n.n(r),o=n(12),l=(n.n(o),n(2)),s=n(5),c=n(37),p=n.n(c),d=n(38),u=(n.n(d),n(1585)),m=n(39),f=n(1586),h=[p.a],b=Object(l.createStore)(u.a,l.applyMiddleware.apply(void 0,h));Object(o.render)(i.a.createElement(s.Provider,{store:b},i.a.createElement(m.a,null,i.a.createElement(f.a,null))),document.getElementById("root"))},1585:function(e,t,n){"use strict";var a=n(2),r=n(70),i=n(60),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=Object(a.combineReducers)(o({},r.a,{EditModal:i.a}));t.a=l},1586:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o,l,s=n(31),c=(n.n(s),n(32)),p=n.n(c),d=n(19),u=(n.n(d),n(18)),m=n.n(u),f=n(56),h=(n.n(f),n(57)),b=n.n(h),w=n(43),E=(n.n(w),n(44)),y=n.n(E),C=n(0),v=n.n(C),S=n(1587),g=(n.n(S),n(20)),M=(n.n(g),n(30)),N=(n.n(M),n(15)),O=n(148),T=n(68),I=n(130),j=n(228),V=n(229),k=n(230),D=(n(118),n(97)),x=n(74),P=n(5),A=n(2),B=n(85),F=n(60),_=n(76),H=(o=Object(P.connect)(function(e){return{supplierDetailMain:e.supplierDetailMain,EditModal:e.EditModal,followupShower:e.followupShower}},function(e){return Object(A.bindActionCreators)({fetchMainData:B.k,doChangeChargeMen:B.j,doFormAdd:F.d,doQueryFollow:_.e},e)}))(l=function(e){function t(n,i){a(this,t);var o=r(this,e.call(this,n,i));return o.handleOpenChoose=function(){o.setState({personSelectorVisible:!0})},o.handleChoosed=function(e,t,n){o.setState({personSelectorVisible:!1});var a=o.supplierId,r=o.props.supplierDetailMain.data.supplier.userId;Object(x.fetchSetContacts)(a,e,t,r).then(function(e){"1"==e.data.code?(y.a.success("分配负责人操作成功!"),window.opener&&window.opener.location.reload(),setTimeout(function(){location.href=document.referrer},1e3)):y.a.error("分配负责人操作失败!")}).catch(function(e){y.a.error("分配负责人操作失败!")})},o.handleFetchToHighSea=function(){var e=o.supplierId;Object(x.fetchToHighSea)(e).then(function(e){"1"==e.data.code?(y.a.success("移入公海成功!"),window.opener&&window.opener.location.reload(),setTimeout(function(){location.href=document.referrer},1e3)):y.a.error("移入公海失败!")}).catch(function(e){y.a.error("移入公海失败!")})},o.handleAddToMe=function(){var e=Object(N.a)();Object(x.fetchSetContacts)(o.supplierId,e.userId,e.realName,"0").then(function(e){"1"==e.data.code?(y.a.success("加入我的客户成功!"),window.opener&&window.opener.location.reload(),setTimeout(function(){location.href=document.referrer},1e3)):y.a.error("加入我的客户失败!")}).catch(function(e){y.a.error("加入我的客户失败!")})},o.showMoreBtn=function(){o.setState({isBtnExpand:!0})},o.turnToMidify=function(){var e=o.supplierId,t=Object(N.e)(),n=t.moduleId?t.moduleId:"",a=t.systemId?t.systemId:"";location.href="/suppliermanage/modifysupplier/?supplierId="+e+"&moduleId="+n+"&systemId="+a},o.handleMerged=function(e){o.setState({mergeSuppliersVisible:!1}),e?y.a.success("合并成功!"):y.a.error("合并失败!")},o.handlePersonCancel=function(){o.setState({personSelectorVisible:!1})},o.openMergedWidget=function(){o.setState({mergeSuppliersVisible:!0})},o.handleCancel=function(){o.setState({mergeSuppliersVisible:!1})},o.addShowModal=function(e,t){o.props.doFormAdd({companyName:t,supplierId:e,followupType:2,modalType:"1"})},o.handleAddSuccess=function(){var e=o.props.followupShower,t=e.query,n=e.pagination;o.props.doQueryFollow({query:t,pagination:n})},o.handleTurnToNewClue=function(){location.href="/newClue/"},o.handleConfirmOk=function(){o.setState({confirmVisible:!1}),"moveToHighSeas"==o.state.confirmTarget.action&&o.handleFetchToHighSea()},o.handleConfirmCancel=function(){o.setState({confirmVisible:!1})},o.openConfirmModal=function(e){var t={confirmVisible:!0};if(e){var n=e.confirmContent,a=e.confirmTarget;n&&(t.confirmContent=n),a&&(t.confirmTarget=a)}o.setState(t)},o.state={isBtnExpand:!1,personSelectorVisible:!1,mergeSuppliersVisible:!1,confirmVisible:!1,confirmTarget:{action:"moveToHighSeas"},confirmContent:"是否将此供应商移入到公海?"},o.supplierId=Object(N.c)("supplierId"),o}return i(t,e),t.prototype.componentWillMount=function(){this.props.fetchMainData(this.supplierId)},t.prototype.render=function(){var e=this,t=this.supplierId,n=this.state.isBtnExpand,a=this.props.supplierDetailMain.isExpand,r=a?"page-main clearfix right-extend-limit":"page-main clearfix",i=n?"botton-wrap all-btns":"botton-wrap default-btns",o=this.props.supplierDetailMain.data.companyName?this.props.supplierDetailMain.data.companyName:"";return v.a.createElement("div",null,v.a.createElement("h3",{className:"page-title"},"供应商详情"),v.a.createElement("div",{className:r},v.a.createElement("div",{className:"left-wrap"},v.a.createElement("div",{className:"top-wrap"},v.a.createElement("div",{className:"base-wrap"},v.a.createElement("div",{className:"base-info"},v.a.createElement(b.a,{spinning:this.props.supplierDetailMain.isfetching},v.a.createElement(k.default,null)),v.a.createElement("div",{className:"person-wrap"},v.a.createElement(V.default,null))),v.a.createElement("div",{className:i},v.a.createElement("div",{className:"btns"},v.a.createElement(m.a,{type:"primary",className:"normal",onClick:function(){return e.addShowModal(e.supplierId,o)}},"跟进供应商"),v.a.createElement(m.a,{type:"primary",className:"normal",onClick:this.turnToMidify},"编辑供应商"),v.a.createElement(m.a,{type:"primary",className:"normal",onClick:this.handleOpenChoose},"分配负责人"),v.a.createElement(m.a,{type:"primary",className:"normal",onClick:function(){e.openConfirmModal()}},"移入公海")),v.a.createElement(m.a,{className:"more",onClick:function(){return e.showMoreBtn()}},"更多"),v.a.createElement(T.default,{onChoosed:this.handleChoosed.bind(this),visible:this.state.personSelectorVisible,onCancel:this.handlePersonCancel.bind(this)}),v.a.createElement(O.default,{onComfirm:this.handleMerged.bind(this),onCancel:this.handleCancel.bind(this),supplierId:t,companyName:o,visible:this.state.mergeSuppliersVisible}),v.a.createElement(D.default,{onSuccess:this.handleAddSuccess.bind(this)}),v.a.createElement(p.a,{visible:this.state.confirmVisible,onOk:this.handleConfirmOk,onCancel:this.handleConfirmCancel},v.a.createElement("p",null,this.state.confirmContent)))),v.a.createElement("div",{className:"chart-wrap"})),v.a.createElement("div",{className:"bottom-wrap"},v.a.createElement("div",{className:"tab"},v.a.createElement("span",{className:"active"},"跟进记录")),v.a.createElement(j.default,null))),v.a.createElement("div",{className:"right-wrap"},v.a.createElement("div",{className:"link-wrap"},v.a.createElement(m.a,{type:"primary",className:"normal",onClick:this.handleTurnToNewClue},"新建供应商线索")),v.a.createElement(b.a,{spinning:this.props.supplierDetailMain.isfetching},v.a.createElement(I.default,{isClueView:!1})))))},t}(C.Component))||l;t.a=H},1587:function(e,t){}},[1584]);