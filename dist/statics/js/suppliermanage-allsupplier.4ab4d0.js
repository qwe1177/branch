webpackJsonp([10],{1550:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(40),r=(a.n(n),a(0)),o=a.n(r),i=a(12),l=(a.n(i),a(2)),c=a(5),s=a(37),u=a.n(s),p=a(38),m=(a.n(p),a(1551)),d=a(39),f=a(1552),h=[u.a],y=Object(l.createStore)(m.a,l.applyMiddleware.apply(void 0,h));Object(i.render)(o.a.createElement(c.Provider,{store:y},o.a.createElement(d.a,null,o.a.createElement(f.a,null))),document.getElementById("root"))},1551:function(e,t,a){"use strict";var n=a(2),r=a(26),o=(a.n(r),a(1)),i=(a.n(o),a(339)),l=a(116),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s={compNameOrAddressOrMobile:"companyName",compNameOrAddressOrMobileValue:"",level:"",source:"",enterpriseType:"",varietyNameId:"",varietyNameNames:"",mainBrand:"",mainBrandNames:"",areaType:"",partnership:"",createdate:[],other:[]},u={queryform:s},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments[1];switch(t.type){case i.g:return t.data;case i.f:return{queryform:s};case i.b:return u;default:return e}},m={isFetching:!1,tableData:[],selectedList:[],pagination:{showQuickJumper:!0,showSizeChanger:!0,total:1,current:1,pageSize:10,showTotal:function(e){return"共 "+e+" 条"}}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments[1];switch(t.type){case i.e:return c({},e,{isFetching:!0});case i.c:var a=t.data,n=a.tableData,r=a.pagination,o=c({},e.pagination,r);return c({},e,{tableData:n,pagination:o,isFetching:!1});case i.d:return c({},e,{isFetching:!1});case i.a:var l=t.data.selectedList;return c({},e,{selectedList:l});default:return e}},f=Object(n.combineReducers)({mainQueryData:p,mainTableData:d,power:l.a});t.a=f},1552:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,l,c=a(13),s=(a.n(c),a(14)),u=a.n(s),p=a(0),m=a.n(p),d=a(1553),f=(a.n(d),a(20)),h=(a.n(f),a(30)),y=(a.n(h),a(1554)),b=a(1556),g=a(5),v=a(2),E=a(116),C=(i=Object(g.connect)(function(e){return{power:e.power}},function(e){return Object(v.bindActionCreators)({getOperateData:E.d},e)}))(l=function(e){function t(){return n(this,t),r(this,e.apply(this,arguments))}return o(t,e),t.prototype.componentWillMount=function(){this.props.getOperateData()},t.prototype.render=function(){var e=u.a.create()(y.a);return m.a.createElement("div",null,m.a.createElement("h3",{className:"page-title"},"全部供应商"),m.a.createElement("div",{className:"page-main"},m.a.createElement("div",{className:"query-wrap"},m.a.createElement(e,null)),m.a.createElement("div",{className:"tabel-wrap"},m.a.createElement(b.a,null))))},t}(p.Component))||l;t.a=C},1553:function(e,t){},1554:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,l,c=a(19),s=(a.n(c),a(18)),u=a.n(s),p=a(21),m=(a.n(p),a(22)),d=a.n(m),f=a(27),h=(a.n(f),a(33)),y=a.n(h),b=a(24),g=(a.n(b),a(25)),v=a.n(g),E=a(71),C=(a.n(E),a(72)),O=a.n(C),S=a(46),w=(a.n(S),a(47)),T=a.n(w),j=a(28),N=(a.n(j),a(29)),k=a.n(N),D=a(13),I=(a.n(D),a(14)),V=a.n(I),x=a(0),F=a.n(x),q=a(3),P=(a.n(q),a(1)),R=a.n(P),_=a(1555),Q=(a.n(_),a(111)),M=a(151),B=a(73),A=a(5),L=a(2),U=a(339),Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},H=V.a.Item,z=k.a.Option,W=(T.a.MonthPicker,T.a.RangePicker),K=O.a.Group,G=(i=Object(A.connect)(function(e){return{mainQueryData:e.mainQueryData,mainTableData:e.mainTableData}},function(e){return Object(L.bindActionCreators)({initQueryFrom:U.i,setQueryFrom:U.m,resetQueryFrom:U.l,requestSupplier:U.k,queryTableData:U.j},e)}))(l=function(e){function t(){var a,o,i;n(this,t);for(var l=arguments.length,c=Array(l),s=0;s<l;s++)c[s]=arguments[s];return a=o=r(this,e.call.apply(e,[this].concat(c))),o.state={brandSelectorVisible:!1,categorySelectorVisible:!1},o.handleSubmit=function(e){e.preventDefault();var t=(o.props.mainQueryData.queryform,o.props.mainTableData),a=t.pagination,n=t.isFetching;o.props.form.validateFieldsAndScroll(function(e,t){if(!e&&!n){var r=Y({current:1},a);o.props.setQueryFrom({queryform:t}),o.props.queryTableData({queryform:t,pagination:r})}})},o.handleReset=function(){o.props.form.resetFields();var e=o.props.mainQueryData;e.queryform,e.pagination;o.props.resetQueryFrom()},o.checkName=function(e,t,a){var n=o.props.form,r=n.getFieldValue("name");r&&""!=r?a():a("企业名称必须填写!")},o.changeToLastSeven=function(){o.props.form.setFieldsValue({createdate:[R()().subtract(6,"days"),R()()]})},o.changeToToday=function(){o.props.form.setFieldsValue({createdate:[R()(),R()()]})},o.handleOpenChoose=function(){o.setState({brandSelectorVisible:!0})},o.handleOpenChooseForCategory=function(){o.setState({categorySelectorVisible:!0})},o.handleChoosed=function(e,t){o.props.form.setFieldsValue({mainBrandNames:t,mainBrandId:e}),o.setState({brandSelectorVisible:!1})},o.handleCancel=function(){o.setState({brandSelectorVisible:!1})},o.handleChoosedForCategory=function(e,t){o.props.form.setFieldsValue({varietyNameNames:t,varietyNameId:e}),o.setState({categorySelectorVisible:!1})},o.handleCancelForCategory=function(){o.setState({categorySelectorVisible:!1})},o.getLastSelectBrand=function(){return{labelstr:o.props.form.getFieldValue("mainBrandNames"),idstr:o.props.form.getFieldValue("mainBrandId")}},o.getLastSelectCategory=function(){return o.props.form.getFieldValue("varietyNameId")},i=a,r(o,i)}return o(t,e),t.prototype.componentDidMount=function(){var e=this.props.mainQueryData.queryform,t={};for(var a in e)e[a]&&""!=e[a]&&(t[a]=e[a]);this.props.form.setFieldsValue(t)},t.prototype.render=function(){var e=this.props.form.getFieldDecorator,t={labelCol:{span:9},wrapperCol:{span:15}},a={labelCol:{span:7},wrapperCol:{span:17}},n={labelCol:{span:4},wrapperCol:{span:20}},r=this.getLastSelectBrand(),o=this.getLastSelectCategory();return F.a.createElement(V.a,{layout:"horizontal",onSubmit:this.handleSubmit,className:"query-form"},F.a.createElement(d.a,{gutter:16},F.a.createElement(v.a,{span:3},F.a.createElement(H,null,e("compNameOrAddressOrMobile",{initialValue:"companyName"})(F.a.createElement(k.a,{style:{width:"100%"}},Object(B.a)("企业名称").map(function(e){return F.a.createElement(z,{key:e.value,value:e.value},e.label)}))))),F.a.createElement(v.a,{span:2},F.a.createElement(H,null,e("compNameOrAddressOrMobileValue")(F.a.createElement(y.a,{style:{width:"100%"}})))),F.a.createElement(v.a,{span:4},F.a.createElement(H,Y({},t,{label:"客户级别"}),e("level",{initialValue:""})(F.a.createElement(k.a,{style:{width:"100%"}},Object(B.a)("客户级别").map(function(e){return F.a.createElement(z,{key:e.value,value:e.value},e.label)}))))),F.a.createElement(v.a,{span:4},F.a.createElement(H,Y({},t,{label:"客户来源"}),e("source",{initialValue:""})(F.a.createElement(k.a,{style:{width:"100%"}},Object(B.a)("客户来源").map(function(e){return F.a.createElement(z,{key:e.value,value:e.value},e.label)}))))),F.a.createElement(v.a,{span:5},F.a.createElement(H,Y({},t,{label:"客户类型"}),e("enterpriseType",{initialValue:""})(F.a.createElement(k.a,{style:{width:"100%"}},Object(B.a)("客户类型").map(function(e){return F.a.createElement(z,{key:e.value,value:e.value},e.label)}))))),F.a.createElement(v.a,{span:6},e("varietyNameId")(F.a.createElement(y.a,{type:"hidden"})),F.a.createElement(H,Y({},t,{label:"主营类目"}),e("varietyNameNames")(F.a.createElement(y.a,{onClick:this.handleOpenChooseForCategory,readOnly:!0}))))),F.a.createElement(d.a,{gutter:16},F.a.createElement(v.a,{span:5},e("mainBrandId")(F.a.createElement(y.a,{type:"hidden"})),F.a.createElement(H,Y({},t,{label:"主营品牌"}),e("mainBrandNames")(F.a.createElement(y.a,{onClick:this.handleOpenChoose,readOnly:!0})))),F.a.createElement(v.a,{span:5},F.a.createElement(H,Y({},t,{label:"客户区域"}),e("areaType",{initialValue:""})(F.a.createElement(k.a,{style:{width:120}},Object(B.a)("客户区域").map(function(e){return F.a.createElement(z,{key:e.value,value:e.value},e.label)}))))),F.a.createElement(v.a,{span:5},F.a.createElement(H,Y({},t,{label:"合作关系"}),e("partnership",{initialValue:""})(F.a.createElement(k.a,{style:{width:120}},Object(B.a)("合作关系").map(function(e){return F.a.createElement(z,{key:e.value,value:e.value},e.label)}))))),F.a.createElement(v.a,{span:7},F.a.createElement(H,Y({},a,{label:"创建日期"}),e("createdate")(F.a.createElement(W,null)))),F.a.createElement(v.a,{span:2,className:"right-wrap"},F.a.createElement("span",{className:"rangeButton",onClick:this.changeToToday},"今天")," ",F.a.createElement("span",{className:"rangeButton",onClick:this.changeToLastSeven},"近7天"))),F.a.createElement(d.a,{gutter:16},F.a.createElement(v.a,{span:16,style:{textAlign:"left"}},F.a.createElement(H,Y({},n,{label:"其他条件"}),e("other")(F.a.createElement(K,{options:Object(B.a)("供应商列表其他查询条件")})))),F.a.createElement(v.a,{span:8,className:"right-wrap"},F.a.createElement(u.a,{type:"primary",htmlType:"submit"},"查询"),F.a.createElement(u.a,{type:"ghost",className:"resetButton",onClick:this.handleReset},"重置"))),F.a.createElement(Q.default,{onChoosed:this.handleChoosed.bind(this),visible:this.state.brandSelectorVisible,choosedKeys:r,onCancel:this.handleCancel.bind(this)}),F.a.createElement(M.default,{onChoosed:this.handleChoosedForCategory.bind(this),choosedKeys:o,visible:this.state.categorySelectorVisible,onCancel:this.handleCancelForCategory.bind(this)}))},t}(F.a.Component))||l;t.a=G},1555:function(e,t){},1556:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,l,c=a(31),s=(a.n(c),a(32)),u=a.n(s),p=a(34),m=(a.n(p),a(35)),d=a.n(m),f=a(41),h=(a.n(f),a(42)),y=a.n(h),b=a(0),g=a.n(b),v=a(3),E=(a.n(v),a(1557)),C=(a.n(E),a(5)),O=a(2),S=a(339),w=(a(10),a(15)),T=a(20),j=(a.n(T),a(74)),N=a(68),k=(i=Object(C.connect)(function(e){return{mainQueryData:e.mainQueryData,mainTableData:e.mainTableData,power:e.power}},function(e){return Object(O.bindActionCreators)({queryTableData:S.j,setQueryFrom:S.m,doChangeMainCheck:S.h},e)}))(l=function(e){function t(){var a,o,i;n(this,t);for(var l=arguments.length,c=Array(l),s=0;s<l;s++)c[s]=arguments[s];return a=o=r(this,e.call.apply(e,[this].concat(c))),o.state={personSelectorVisible:!1,actionInfo:{},confirmVisible:!1,confirmTarget:{action:"moveToHighSeas",data:[]},confirmContent:"是否将此供应商移入到公海?"},o.queryWithDefault=function(){var e=o.props.mainQueryData.queryform,t=o.props.mainTableData.pagination;o.props.queryTableData({queryform:e,pagination:t})},o.handleTableChange=function(e,t,a){var n=o.props.mainQueryData.queryform;o.props.queryTableData({queryform:n,pagination:e})},o.rowSelection={onChange:function(e,t){o.props.doChangeMainCheck({selectedList:t})},getCheckboxProps:function(e){return{disabled:"Disabled User"===e.name}}},o.handleRefresh=function(){o.props.mainTableData.isFetching||o.queryWithDefault()},o.handleOpenChoose=function(){var e=o.props.mainTableData.selectedList;0==e.length?y.a.warning("请选择要分配的供应商"):o.setState({personSelectorVisible:!0,actionInfo:{name:"分配",data:e}})},o.handlePersonCancel=function(){o.setState({personSelectorVisible:!1})},o.handleRowClick=function(e,t,a){var n=a.target.getAttribute("class");if(-1!=n.indexOf("js-addus")||-1!=n.indexOf("js-out")||-1!=n.indexOf("js-in"))if(-1!=n.indexOf("js-addus")){var r=Object(w.a)();o.handleChoosed(r.userId,r.realName,{name:"加入",data:[e]})}else-1!=n.indexOf("js-out")?o.setState({personSelectorVisible:!0,actionInfo:{name:"分配",data:[e]}}):o.openConfirmModal({confirmTarget:{action:"moveToHighSeas",data:e.supplierId}})},o.doFetchToHighSea=function(e,t){Object(j.fetchToHighSea)(e).then(function(e){"1"==e.data.code?(y.a.success("移入成功!"),o.queryWithDefault()):y.a.error("移入失败!")}).catch(function(e){y.a.error("移入失败!")})},o.handleChoosed=function(e,t,a){o.setState({personSelectorVisible:!1});var n=a.name,r=a.data.map(function(e){return e.supplierId}).toString(),i=a.data.map(function(e){return e.userId}).toString();Object(j.fetchSetContacts)(r,e,t,i).then(function(e){"1"==e.data.code?(y.a.success(n+"成功!"),o.queryWithDefault()):y.a.error(n+"失败!")}).catch(function(e){y.a.error(n+"失败!")})},o.handleConfirmOk=function(){if(o.setState({confirmVisible:!1}),"moveToHighSeas"==o.state.confirmTarget.action){var e=o.state.confirmTarget.data;o.doFetchToHighSea(e)}},o.handleConfirmCancel=function(){o.setState({confirmVisible:!1})},o.openConfirmModal=function(e){var t={confirmVisible:!0};if(e){var a=e.confirmContent,n=e.confirmTarget;a&&(t.confirmContent=a),n&&(t.confirmTarget=n)}o.setState(t)},o.getDetailUrl=function(e,t,a){var n=Object(w.e)(),r=n.moduleId?n.moduleId:"",o=n.systemId?n.systemId:"",i="";return"my"==e?i="/suppliermanage/mysupplierdetail/":"theHighSeas"==e?i="/suppliermanage/inseasupplierdetail/":"underling"==e&&(i="/suppliermanage/underlingsupplierdetail/"),""==i?a:g.a.createElement("a",{href:i+"?systemId="+o+"&moduleId="+r+"&supplierId="+t},a)},i=a,r(o,i)}return o(t,e),t.prototype.componentWillMount=function(){this.queryWithDefault()},t.prototype.render=function(){var e=this,t=(Object(w.f)("列表查询",this.props.power.operate),[{title:"企业名称",dataIndex:"companyName",key:"companyName",render:function(t,a){return e.getDetailUrl(a.type,a.supplierId,t)}},{title:"来源",dataIndex:"source",key:"source"},{title:"企业性质",dataIndex:"enterpriseType",key:"enterpriseType"},{title:"主营类目",dataIndex:"varietyName",key:"varietyName"},{title:"主营品牌",dataIndex:"mainBrand",key:"mainBrand"},{title:"联系人信息",dataIndex:"contacts",key:"contacts",render:function(e,t){return g.a.createElement("div",null,g.a.createElement("div",null,t.fullname),g.a.createElement("div",null,t.mobile))}},{title:"创建时间",dataIndex:"createTime2",key:"createTime2"},{title:"负责人",dataIndex:"realName",key:"realName"},{title:"操作",dataIndex:"option",render:function(e,t){return"theHighSeas"==t.type?g.a.createElement("span",{className:"table-options-wrap"},g.a.createElement("a",{href:"javascript:;",className:"js-addus"},"加入我的")):"my"==t.type||"underling"==t.type?g.a.createElement("span",{className:"table-options-wrap"},g.a.createElement("a",{href:"javascript:;",className:"js-out"},"分配"),g.a.createElement("a",{href:"javascript:;",className:"last-link js-in"},"移入")):""},key:"option"}]),a=this.props.mainTableData,n=a.tableData,r=a.pagination,o=a.isFetching;return g.a.createElement("div",{className:"main-table"},g.a.createElement("div",{className:"tabel-extend-option"},g.a.createElement("span",{onClick:this.handleRefresh,className:"refresh"},"刷新列表")),g.a.createElement(d.a,{bordered:!0,columns:t,rowKey:function(e){return e.supplierId},dataSource:n,pagination:r,loading:o,onChange:this.handleTableChange,rowSelection:this.rowSelection,onRowClick:this.handleRowClick}),g.a.createElement(u.a,{visible:this.state.confirmVisible,onOk:this.handleConfirmOk,onCancel:this.handleConfirmCancel},g.a.createElement("p",null,this.state.confirmContent)),g.a.createElement(N.default,{onChoosed:this.handleChoosed.bind(this),onCancel:this.handlePersonCancel.bind(this),visible:this.state.personSelectorVisible,actionInfo:this.state.actionInfo}))},t}(g.a.Component))||l;t.a=k},1557:function(e,t){},339:function(e,t,a){"use strict";function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){function n(r,o){try{var i=t[r](o),l=i.value}catch(e){return void a(e)}if(!i.done)return Promise.resolve(l).then(function(e){n("next",e)},function(e){n("throw",e)});e(l)}return n("next")})}}a.d(t,"b",function(){return p}),a.d(t,"f",function(){return m}),a.d(t,"g",function(){return d}),a.d(t,"e",function(){return f}),a.d(t,"c",function(){return h}),a.d(t,"d",function(){return y}),a.d(t,"a",function(){return b}),a.d(t,"k",function(){return C}),a.d(t,"i",function(){return T}),a.d(t,"l",function(){return j}),a.d(t,"m",function(){return N}),a.d(t,"j",function(){return k}),a.d(t,"h",function(){return D});var r=a(10),o=a(15),i=a(23),l=a(26),c=a.n(l),s=this,u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},p="INIT_QUERY",m="RESET_QUERY",d="SET_QUERY",f="REQUEST_SUPPLIER",h="RECEIVE_SUPPLIER",y="RECEIVE_SUPPLIER_FAIL",b="CHANGE_MAIN_CHECK",g=function(e){return{type:p,data:e}},v=function(e){return{type:d,data:e}},E=function(e){return{type:m,data:e}},C=function(){return{type:f}},O=function(e){return{type:h,data:e}},S=function(){return{type:y}},w=function(e){return{type:b,data:e}},T=function(e){return function(t,a){return t(g(e))}},j=function(e){return function(t,a){return t(E(e))}},N=function(e){return function(t,a){return t(v(e))}},k=function(e){return function(){var t=n(regeneratorRuntime.mark(function t(a,n){var l,p,m,d,f,h,y,b,g,v,E,w,T,j;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a(C());case 3:if(l=Object(o.e)(),p=l.moduleId?l.moduleId:"",m=e.queryform,d=e.pagination,f={pageNo:d.current,pageSize:d.pageSize},m.createOrResponsibleTime="createTime",m.createdate&&m.createdate.length>0&&(m.startTime=m.createdate[0].format("YYYY-MM-DD"),m.endTime=m.createdate[1].format("YYYY-MM-DD")),!(m.other&&m.other.length>0)){t.next=27;break}h=m.other,y=h,b=Array.isArray(y),g=0,y=b?y:y[Symbol.iterator]();case 13:if(!b){t.next=19;break}if(!(g>=y.length)){t.next=16;break}return t.abrupt("break",27);case 16:v=y[g++],t.next=23;break;case 19:if(g=y.next(),!g.done){t.next=22;break}return t.abrupt("break",27);case 22:v=g.value;case 23:E=v,m[E]="yes";case 25:t.next=13;break;case 27:return m=c.a.omit(m,["varietyNameNames","mainBrandNames","createdate","other"]),m=c.a.omitBy(m,c.a.isUndefined),w={sign:"lbcx"},T=u({isPass:"yes",markToDistinguish:"all"},m,f,{moduleId:p},w),t.next=33,i.a.get(r.c+"/management/viewSupplierList.do",{params:T});case 33:return j=t.sent,t.next=36,a(O({tableData:j.data.data.data,pagination:{total:j.data.data.rowCount,current:j.data.data.pageNo,pageSize:j.data.data.pageSize}}));case 36:return t.abrupt("return",t.sent);case 39:return t.prev=39,t.t0=t.catch(0),t.next=44,a(S());case 44:return t.abrupt("return",t.sent);case 45:case"end":return t.stop()}},t,s,[[0,39]])}));return function(e,a){return t.apply(this,arguments)}}()},D=function(e){return function(t,a){return t(w(e))}}}},[1550]);