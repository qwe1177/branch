webpackJsonp([39],{1290:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=t(40),r=(t.n(n),t(0)),l=t.n(r),i=t(12),s=(t.n(i),t(2)),o=t(5),p=t(37),c=t.n(p),d=t(38),u=(t.n(d),t(1291)),m=t(39),h=t(1292),f=[c.a],b=Object(s.createStore)(u.a,s.applyMiddleware.apply(void 0,f));Object(i.render)(l.a.createElement(o.Provider,{store:b},l.a.createElement(m.a,null,l.a.createElement(h.a,null))),document.getElementById("root"))},1291:function(e,a,t){"use strict";var n=t(2),r=t(70),l=t(60),i=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},s=Object(n.combineReducers)(i({},r.a,{EditModal:l.a}));a.a=s},1292:function(e,a,t){"use strict";function n(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function r(e,a){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?e:a}function l(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(e,a):e.__proto__=a)}var i,s,o=t(21),p=(t.n(o),t(22)),c=t.n(p),d=t(24),u=(t.n(d),t(25)),m=t.n(u),h=t(31),f=(t.n(h),t(32)),b=t.n(f),E=t(56),y=(t.n(E),t(57)),M=t.n(y),D=t(59),g=(t.n(D),t(41)),v=t.n(g),C=t(13),S=(t.n(C),t(14)),w=t.n(S),N=t(19),I=(t.n(N),t(18)),O=t.n(I),k=t(43),j=(t.n(k),t(44)),A=t.n(j),B=t(0),X=t.n(B),x=t(1293),P=(t.n(x),t(23)),V=t(10),J=t(30),Q=(t.n(J),t(15)),q=t(148),Y=t(68),T=t(130),R=t(223),K=t(226),L=t(227),U=(t(118),t(97)),F=t(183),H=t(74),_=t(5),W=t(2),z=t(85),G=t(60),Z=t(76),$=(i=Object(_.connect)(function(e){return{supplierDetailMain:e.supplierDetailMain,EditModal:e.EditModal,followupShower:e.followupShower,editXSJBVisible:e.editXSJBVisible}},function(e){return Object(W.bindActionCreators)({fetchMainData:z.k,fetchMainData2:z.l,doChangeChargeMen:z.j,doFormAdd:G.d,doQueryFollow:Z.e,toOpenUpdateXSJB:z.r,toCloseUpdateXSJB:z.p,QXPK:z.g,QRTJ:z.d,QXADDMY:z.f,QRADDMY:z.b,PKreset:z.a,QRADDMYHANDLE:z.c},e)}))(s=function(e){function a(t,l){n(this,a);var i=r(this,e.call(this,t,l));return i.handleOpenChoose=function(){i.setState({personSelectorVisible:!0})},i.handleChoosed=function(e,a,t){i.setState({personSelectorVisible:!1});var n=i.supplierId,r=i.props.supplierDetailMain.data.supplier.userId;Object(H.fetchSetContacts)(n,e,a,r).then(function(e){"1"==e.data.code?(A.a.success("分配负责人操作成功!"),i.props.doChangeChargeMen()):A.a.error("分配负责人操作失败!")}).catch(function(e){A.a.error("分配负责人操作失败!")})},i.pkmodal=function(){i.props.QRTJ()},i.qxpkhandle=function(){i.props.QXPK()},i.qrtjhandle=function(){var e=i.props.supplierDetailMain.data.supplierId,a=i.props.supplierDetailMain.data.supplier.userId;P.a.get(V.c+"/clue/editCancelQualityControl.do",{params:{supplierId:e,responsibleSources:a,responsibleUserId:Object(Q.a)().userId,responsiblRealName:Object(Q.a)().realName}}).then(function(e){200==e.status&&1==e.data.code?(A.a.success(""+e.data.msg),i.props.QXPK(),i.props.PKreset()):A.a.error(""+e.data.msg)}).catch(function(e){})},i.ADDMYmodal=function(){i.props.QRADDMY()},i.qxADDMYhandle=function(){i.props.QXADDMY()},i.qrADDMYhandle=function(){P.a.get(V.c+"/clue/editPersonLiable.do",{params:{supplierId:i.props.supplierDetailMain.data.supplierId,responsibleSources:i.props.supplierDetailMain.data.supplier.userId,responsibleUserId:Object(Q.a)().userId,responsiblRealName:Object(Q.a)().realName}}).then(function(e){200==e.status&&1==e.data.code?(A.a.success(""+e.data.msg),i.props.QRADDMYHANDLE(),window.opener&&window.opener.location.reload(),setTimeout(function(){location.href=document.referrer},1e3)):A.a.error(""+e.data.msg)}).catch(function(e){})},i.XSJBhandleCancel=function(){i.props.toCloseUpdateXSJB()},i.XSJBhandleOpenModal=function(){i.props.toOpenUpdateXSJB()},i.handleFetchToHighSea=function(){var e=i.supplierId;Object(H.fetchToHighSea)(e).then(function(e){"1"==e.data.code?(A.a.success("移入公海成功!"),window.opener&&window.opener.location.reload(),setTimeout(function(){location.href=document.referrer},1e3)):A.a.error("移入公海失败!")}).catch(function(e){A.a.error("移入公海失败!")})},i.showMoreBtn=function(){i.setState({isBtnExpand:!0})},i.turnToMidify=function(){var e=i.supplierId,a=Object(Q.e)(),t=a.moduleId?a.moduleId:"";location.href="/suppliermanage/modifysupplier/?supplierId="+e+"&moduleId="+t+"&moduleUrl="},i.tourl=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(){var t=i.supplierId,n=Object(Q.e)(),r=n.systemId?n.systemId:"",l=n.moduleId?n.moduleId:"";location.href=a?e+"?supplierId="+t+"&moduleId="+l+"&systemId="+r:e+"?moduleId="+l+"&systemId="+r}},i.handleMerged=function(e){i.setState({mergeSuppliersVisible:!1}),e?A.a.success("合并成功!"):A.a.error("合并失败!")},i.handlePersonCancel=function(){i.setState({personSelectorVisible:!1})},i.openMergedWidget=function(){i.setState({mergeSuppliersVisible:!0})},i.handleCancel=function(){i.setState({mergeSuppliersVisible:!1})},i.addShowModal=function(e,a,t){i.props.doFormAdd({supplierId:e,companyName:a,followupType:t,modalType:"1"})},i.handleAddSuccess=function(){var e=i.props.followupShower,a=e.query,t=e.pagination;i.props.doQueryFollow({query:a,pagination:t})},i.state={isBtnExpand:!1,personSelectorVisible:!1,mergeSuppliersVisible:!1},i.supplierId=Object(Q.c)("supplierId"),i}return l(a,e),a.prototype.componentWillMount=function(){this.props.fetchMainData2(this.supplierId)},a.prototype.render=function(){var e=this,a=this.supplierId,t=this.state.isBtnExpand,n=this.props.supplierDetailMain.isExpand,r=n?"page-main clearfix right-extend-limit":"page-main clearfix",l=t?"botton-wrap all-btns":"botton-wrap default-btns",i=this.props.supplierDetailMain.data.companyName?this.props.supplierDetailMain.data.companyName:"",s=!1,o=!1,p=!1;switch(this.props.supplierDetailMain.data.self){case"my":s=!0;break;case"underling":s=!0,o=!0;break;case"other":!0;break;case"theHighSeas":p=!0}var d="";switch(this.props.supplierDetailMain.data.qualityControlId){case"0":case"4":d=X.a.createElement(O.a,{type:"primary",className:"normal",onClick:this.tourl("/qualitycontrol/retosubmit/")},"提交品控");break;case"1":d=X.a.createElement(O.a,{type:"primary",className:"normal",onClick:this.pkmodal},"取消品控");break;case"3":d=X.a.createElement(O.a,{type:"primary",className:"normal",onClick:this.tourl("/qualitycontrol/tosubmit/")},"重新提交品控")}var u=w.a.create()(F.a),h=["品控驳回","品控审查中"],f=this.props.supplierDetailMain.data.clueLevel,E=s&&!h.some(function(e){return e==f}),y=E?X.a.createElement(v.a,{type:"edit",onClick:this.XSJBhandleOpenModal}):"";return X.a.createElement("div",null,X.a.createElement("h3",{className:"page-title"},"供应商详情"),X.a.createElement("div",{className:r},X.a.createElement("div",{className:"left-wrap"},X.a.createElement("div",{className:"top-wrap"},X.a.createElement("div",{className:"base-wrap"},X.a.createElement("div",{className:"base-info"},X.a.createElement(M.a,{spinning:this.props.supplierDetailMain.isfetching},X.a.createElement(L.a,null)),X.a.createElement("div",{className:"person-wrap"},X.a.createElement(K.a,{self:this.props.supplierDetailMain.data.self}))),X.a.createElement("div",{className:l},X.a.createElement("div",{className:"btns"},s?X.a.createElement(O.a,{type:"primary",className:"normal",onClick:function(a,t,n){return e.addShowModal(e.supplierId,i,1)}},"新增跟进线索"):"",s?d:"",s?X.a.createElement(O.a,{type:"primary",className:"normal",onClick:this.handleOpenChoose},"分配负责人"):"",p?X.a.createElement(O.a,{type:"primary",className:"normal",onClick:this.ADDMYmodal},"加入我的线索"):"",o?X.a.createElement(O.a,{type:"primary",className:"normal",onClick:this.openMergedWidget},"并入线索"):"",s?X.a.createElement(O.a,{type:"primary",className:"normal",onClick:this.handleFetchToHighSea},"移入公海"):"",s?X.a.createElement(O.a,{type:"primary",className:"normal",onClick:this.tourl("/productpricing/upload/")},"上传产品报价"):"",X.a.createElement(b.a,{title:"提示",visible:this.props.supplierDetailMain.PKVisible,onCancel:this.qxpkhandle,onOk:this.qrtjhandle},X.a.createElement("p",null,this.props.supplierDetailMain.PKcontent)),X.a.createElement(b.a,{title:"提示",visible:this.props.supplierDetailMain.addmyVisible,onCancel:this.qxADDMYhandle,onOk:this.qrADDMYhandle},X.a.createElement("p",null,this.props.supplierDetailMain.ADDMYcontent))),X.a.createElement(O.a,{className:"more",onClick:function(){return e.showMoreBtn()}},"更多"),X.a.createElement(Y.default,{onChoosed:this.handleChoosed.bind(this),visible:this.state.personSelectorVisible,onCancel:this.handlePersonCancel.bind(this)}),X.a.createElement(q.default,{onComfirm:this.handleMerged.bind(this),onCancel:this.handleCancel.bind(this),supplierId:a,companyName:i,visible:this.state.mergeSuppliersVisible}),X.a.createElement(U.default,{onSuccess:this.handleAddSuccess.bind(this)}))),X.a.createElement("div",{className:"chart-wrap"},X.a.createElement("div",{className:"xsjb"},X.a.createElement("p",{className:"p1"},"线索级别"),X.a.createElement("p",{className:"p2"},X.a.createElement("span",{className:"s1"},this.props.supplierDetailMain.data.clueLevel?this.props.supplierDetailMain.data.clueLevel:"暂无"),X.a.createElement("span",{className:"s2"},y)),X.a.createElement(b.a,{title:"修改线索级别",visible:this.props.supplierDetailMain.editXSJBVisible,onCancel:this.XSJBhandleCancel,footer:null},X.a.createElement(u,null))))),X.a.createElement("div",{className:"bottom-wrap"},X.a.createElement("div",{className:"tab"},X.a.createElement("span",{className:"active"},"跟进记录")),X.a.createElement(R.a,null))),X.a.createElement("div",{className:"right-wrap"},X.a.createElement("div",{className:"link-wrap"},X.a.createElement(c.a,null,X.a.createElement(m.a,{span:12,style:{paddingRight:"5px"}},X.a.createElement(O.a,{type:"primary",className:"normal",onClick:this.tourl("/newClue/",0)},"新建线索")),X.a.createElement(m.a,{span:12,style:{paddingLeft:"5px"}},X.a.createElement(O.a,{type:"primary",className:"normal",onClick:this.tourl("/editClue/")},"编辑线索")))),X.a.createElement(M.a,{spinning:this.props.supplierDetailMain.isfetching},X.a.createElement(T.default,null)))))},a}(B.Component))||s;a.a=$},1293:function(e,a){}},[1290]);